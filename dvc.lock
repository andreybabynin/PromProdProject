schema: '2.0'
stages:
  fit_model:
    cmd: python fit_model.py
    deps:
    - path: data/spam.csv
      md5: 181f52dfcd50655bc379b8f7c41df904
      size: 503663
    - path: fit_model.py
      md5: e1c9d7dea95a5f9f9afd7a0ac1f12c1f
      size: 3160
    params:
      params.yaml:
        feature_storage.n_estimators: 50
    outs:
    - path: data/X_test.pickle
      md5: ee5cf3d436396dea7efad81de7d65482
      size: 29922275
    - path: data/X_train.pickle
      md5: 73b5db760627b5ca072765aa74296759
      size: 69794563
    - path: data/y_test.pickle
      md5: 610f5033cfd6f35c2f117813574f884e
      size: 40781
    - path: data/y_train.pickle
      md5: 44aa4e4c17d27c8db58296e04b145d3b
      size: 94262
    - path: models/cv.pickle
      md5: 4a97db166c749dddef6113f028e321fa
      size: 108815
    - path: models/rfc.onnx
      md5: 63f9f5a9206c14987c50f6284fc72eef
      size: 2777808
  download_data:
    cmd: wget -O data/spam.csv https://www.dropbox.com/s/68edi5r8xn9lw46/spam.csv?dl=1
    outs:
    - path: data/spam.csv
      md5: 181f52dfcd50655bc379b8f7c41df904
      size: 503663
  inference_model:
    cmd: python test_model.py
    deps:
    - path: data/X_test.pickle
      md5: ee5cf3d436396dea7efad81de7d65482
      size: 29922275
    - path: data/X_train.pickle
      md5: 73b5db760627b5ca072765aa74296759
      size: 69794563
    - path: data/y_test.pickle
      md5: 610f5033cfd6f35c2f117813574f884e
      size: 40781
    - path: data/y_train.pickle
      md5: 44aa4e4c17d27c8db58296e04b145d3b
      size: 94262
    - path: models/rfc.onnx
      md5: 63f9f5a9206c14987c50f6284fc72eef
      size: 2777808
    outs:
    - path: metrics/metrics.json
      md5: 16e62f45026bd9114281b5fc0d45705d
      size: 82
    - path: metrics/plots/roc_auc.csv
      md5: 8e9998b34c244e187d0f4d3e167a901d
      size: 47
  sample_fit:
    cmd: python fit_model.py
    deps:
    - path: data/spam.csv
      md5: 181f52dfcd50655bc379b8f7c41df904
      size: 503663
    - path: fit_model.py
      md5: eea3b5b323f0c39ed9d652c7a837be92
      size: 2442
