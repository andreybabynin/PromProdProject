schema: '2.0'
stages:
  fit_model:
    cmd: python fit_model.py -i data -o data -m models -n mockingbird
    deps:
    - path: data/spam.csv
      md5: bbbfb4eec9922ee5ef1759cf268ef8e7
      size: 506009
    - path: fit_model.py
      md5: 9b90db4895efe2a65135d3a6bcd641d7
      size: 2141
    params:
      params.yaml:
        feature_storage.n_estimators: 60
    outs:
    - path: data/X_test.pickle
      md5: ee5cf3d436396dea7efad81de7d65482
      size: 29922275
    - path: data/X_train.pickle
      md5: 73b5db760627b5ca072765aa74296759
      size: 69794563
    - path: data/y_test.pickle
      md5: 1cdf4202a0b462f6d0552a8f7c7729bc
      size: 40779
    - path: data/y_train.pickle
      md5: c1b011e9589efb0181a8358c5db4696e
      size: 94260
    - path: models/cv.pickle
      md5: b7d705878f61eefab52d0303bbcaf5e8
      size: 108815
    - path: models/rfc.onnx
      md5: 359b89e9ef542ba34dac25df7f687a96
      size: 3345650
  download_data:
    cmd: wget -O data/spam.csv https://www.dropbox.com/s/6qo05er8p2afg61/new_spam.csv?dl=1
    outs:
    - path: data/spam.csv
      md5: bbbfb4eec9922ee5ef1759cf268ef8e7
      size: 506009
  inference_model:
    cmd: python test_model.py -o data -m models --metrics metrics
    deps:
    - path: data/X_test.pickle
      md5: ee5cf3d436396dea7efad81de7d65482
      size: 29922275
    - path: data/X_train.pickle
      md5: 73b5db760627b5ca072765aa74296759
      size: 69794563
    - path: data/y_test.pickle
      md5: 1cdf4202a0b462f6d0552a8f7c7729bc
      size: 40779
    - path: data/y_train.pickle
      md5: c1b011e9589efb0181a8358c5db4696e
      size: 94260
    - path: models/rfc.onnx
      md5: 359b89e9ef542ba34dac25df7f687a96
      size: 3345650
    outs:
    - path: metrics/metrics.json
      md5: ebf6b4dd8021aa2ded449ef936a72d96
      size: 83
    - path: metrics/plots/roc_auc.csv
      md5: 8e9998b34c244e187d0f4d3e167a901d
      size: 47
